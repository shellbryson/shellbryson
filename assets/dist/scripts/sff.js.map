{"version":3,"sources":["sff.js"],"names":["$","$body","document","querySelector","$navToggle","$navSecondaryToggle","$nav","$navSecondary","$menuLinks","find","is_open","moment","format","resizeEnd","resizeMenu","removeClass","attr","classList","remove","css","fn","serializeObject","o","a","this","serializeArray","each","name","push","value","on","$this","toggleClass","e","preventDefault","animate","scrollTop","window","addEventListener","clearTimeout","setTimeout","keyCode","hasClass","click","ghostHunter","onKeyUp","results","includebodysearch","displaySearchInfo","result_template"],"mappings":"AAAAA,EAAE,SAAUA,GAEV,MAAMC,EAAQC,SAASC,cAAc,QAC/BC,EAAaJ,EAAE,4BACfK,EAAsBL,EAAE,sCACxBM,EAAON,EAAE,qBACTO,EAAgBP,EAAE,wBAElBQ,EADaF,EAAKG,KAAK,MACCA,KAAK,KAC7BC,EAAU,YACFC,SAASC,SACvB,IAAIC,EAgEJ,SAASC,IAEPV,EAAWW,YAAYL,GAASM,KAAK,iBAAiB,GACtDV,EAAKS,YAAYL,GAGjBL,EAAoBU,YAAY,UAAUC,KAAK,iBAAiB,GAChET,EAAcQ,YAAY,UAAUC,KAAK,eAAe,GAExDf,EAAMgB,UAAUC,OAAO,gBACvBZ,EAAKa,IAAI,SAAU,WA9BrBnB,EAAEoB,GAAGC,gBAAkB,WACrB,IAAIC,EAAI,GACJC,EAAIC,KAAKC,iBAWb,OAVAzB,EAAE0B,KAAKH,EAAG,WACJD,EAAEE,KAAKG,OACJL,EAAEE,KAAKG,MAAMC,OAChBN,EAAEE,KAAKG,MAAQ,CAACL,EAAEE,KAAKG,QAEzBL,EAAEE,KAAKG,MAAMC,KAAKJ,KAAKK,OAAS,KAEhCP,EAAEE,KAAKG,MAAQH,KAAKK,OAAS,KAG1BP,GA6BTlB,EAAW0B,GAAG,QAAS,WACrB,MAAMC,EAAQ/B,EAAEwB,MAGa,SAD7BO,EAAMC,YAAYtB,GACfM,KAAK,iBACNe,EAAMf,KAAK,iBAAiB,GAASe,EAAMf,KAAK,iBAAiB,GAGxC,SAD3BV,EAAK0B,YAAYtB,GACdM,KAAK,eACNV,EAAKU,KAAK,eAAe,GAASV,EAAKU,KAAK,eAAe,GAE7B,OAAhCR,EAAWQ,KAAK,YACdR,EAAWQ,KAAK,WAAY,IAAMR,EAAWQ,KAAK,WAAY,QAIlEX,EAAoByB,GAAG,QAAS,SAASG,GACzBjC,EAAEwB,MAChBS,EAAEC,iBAG2B,SAD7BlC,EAAEwB,MAAMQ,YAAY,UACjBhB,KAAK,iBACNhB,EAAEwB,MAAMR,KAAK,iBAAiB,GAAShB,EAAEwB,MAAMR,KAAK,iBAAiB,GAG5C,SAD3BT,EAAcyB,YAAY,UACvBhB,KAAK,eACNT,EAAcS,KAAK,eAAe,GAAST,EAAcS,KAAK,eAAe,GA/B/EhB,EAAE,cAAcmC,QAAQ,CAAEC,UAAW,GAAK,UA3D1CC,OAAOC,iBAAiB,SAAU,WAChCC,aAAa1B,GACbA,EAAY2B,WAAY,WACtB1B,KACC,KAGLuB,OAAOC,iBAAiB,QAAS,SAASL,GACtB,KAAdA,EAAEQ,SAAkBnC,EAAKoC,SAAShC,IACpCN,EAAWuC,UAIfN,OAAOC,iBAAiB,oBAAqB,WAC3CxB,MA7BFd,EAAE,iBAAiB4C,YAAY,CAC7BC,SAAS,EACTC,QAAS,WACTC,mBAAmB,EACnBC,mBAAmB,EACnBC,gBAAiB","file":"sff.js","sourcesContent":["$(function ($) {\n\n  const $body = document.querySelector('body');\n  const $navToggle = $('[data-navigation-toggle]');\n  const $navSecondaryToggle = $('[data-navigation-secondary-toggle]');\n  const $nav = $('[data-navigation]');\n  const $navSecondary = $('[data-subnavigation]');\n  const $menuItems = $nav.find('li');\n  const $menuLinks = $menuItems.find('a');\n  const is_open = 'js-isOpen';\n  const today = moment().format();\n  let resizeEnd;\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Initialise Ghost Hunter search\n  /////////////////////////////////////////////////////////////////////////////\n\n  function initSearch() {\n    $(\"#search-field\").ghostHunter({\n      onKeyUp: true,\n      results: \"#results\",\n      includebodysearch: true,\n      displaySearchInfo: false,\n      result_template: \"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p>{{title}}</p></a>\"\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Initialise various components and helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  function initGlobalEvents() {\n\n    window.addEventListener(\"resize\", function() {\n      clearTimeout(resizeEnd);\n      resizeEnd = setTimeout( function() {\n        resizeMenu();\n      }, 5);\n    });\n\n    window.addEventListener(\"keyup\", function(e) {\n      if (e.keyCode === 27 && $nav.hasClass(is_open)) {\n        $navToggle.click();\n      }\n    })\n\n    window.addEventListener(\"orientationchange\", function() {\n      resizeMenu();\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Form helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  $.fn.serializeObject = function() {\n    var o = {};\n    var a = this.serializeArray();\n    $.each(a, function() {\n      if (o[this.name]) {\n        if (!o[this.name].push) {\n          o[this.name] = [o[this.name]];\n        }\n        o[this.name].push(this.value || '');\n      } else {\n        o[this.name] = this.value || '';\n      }\n    });\n    return o;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Navigation helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  function resizeMenu() {\n    // Hide primary nav\n    $navToggle.removeClass(is_open).attr('aria-expanded', false);\n    $nav.removeClass(is_open);\n\n    // Hide secondary menu on any resizing\n    $navSecondaryToggle.removeClass(\"active\").attr('aria-expanded', false);\n    $navSecondary.removeClass(\"active\").attr('aria-hidden', true);\n\n    $body.classList.remove('mz-no-scroll');\n    $nav.css('height', 'inherit');\n  }\n\n  // Used to prevent page becoming \"fixed\" while partly out of viewport on\n  // trigger of mobile menu\n\n  function resetScrollPosition() {\n    $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\n  }\n\n  // Mobile navigation toggle\n\n  $navToggle.on('click', function () {\n    const $this = $(this);\n\n    $this.toggleClass(is_open)\n      .attr('aria-expanded') === 'true' ?\n      $this.attr('aria-expanded', false) : $this.attr('aria-expanded', true);\n\n    $nav.toggleClass(is_open)\n      .attr('aria-hidden') === 'true' ?\n      $nav.attr('aria-hidden', false) : $nav.attr('aria-hidden', true);\n\n    $menuLinks.attr('tabindex') === '-1' ?\n      $menuLinks.attr('tabindex', '') : $menuLinks.attr('tabindex', '-1');\n\n  });\n\n  $navSecondaryToggle.on('click', function(e) {\n    const $this = $(this);\n    e.preventDefault();\n\n    $(this).toggleClass(\"active\")\n      .attr('aria-expanded') === 'true' ?\n      $(this).attr('aria-expanded', false) : $(this).attr('aria-expanded', true);\n\n    $navSecondary.toggleClass(\"active\")\n      .attr('aria-hidden') === 'true' ?\n      $navSecondary.attr('aria-hidden', false) : $navSecondary.attr('aria-hidden', true);\n\n    resetScrollPosition();\n  });\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Run The Stuff...\n  /////////////////////////////////////////////////////////////////////////////\n\n  initGlobalEvents();\n  initSearch();\n\n});\n\n\n"]}