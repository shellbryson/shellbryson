{"version":3,"sources":["sb.js"],"names":["$","document","querySelector","$navToggle","$navigation","$navigationMenu","is_open","moment","format","resizeEnd","fn","serializeObject","o","a","this","serializeArray","each","name","push","value","on","$this","toggleClass","attr","window","addEventListener","clearTimeout","setTimeout","e","keyCode","$nav","hasClass","click","ghostHunter","onKeyUp","results","includebodysearch","displaySearchInfo","result_template"],"mappings":"AAAAA,EAAE,SAAUA,GAEIC,SAASC,cAAc,QAArC,MACMC,EAAaH,EAAE,cACfI,EAAcJ,EAAE,eAChBK,EAAkBL,EAAE,qBACpBM,EAAU,YACFC,SAASC,SACvB,IAAIC,EA4CJT,EAAEU,GAAGC,gBAAkB,WACrB,IAAIC,EAAI,GACJC,EAAIC,KAAKC,iBAWb,OAVAf,EAAEgB,KAAKH,EAAG,WACJD,EAAEE,KAAKG,OACJL,EAAEE,KAAKG,MAAMC,OAChBN,EAAEE,KAAKG,MAAQ,CAACL,EAAEE,KAAKG,QAEzBL,EAAEE,KAAKG,MAAMC,KAAKJ,KAAKK,OAAS,KAEhCP,EAAEE,KAAKG,MAAQH,KAAKK,OAAS,KAG1BP,GAoBTT,EAAWiB,GAAG,QAAS,WACrB,MAAMC,EAAQrB,EAAEc,MAGa,SAD7BO,EAAMC,YAAYhB,GACfiB,KAAK,iBACNF,EAAME,KAAK,iBAAiB,GAASF,EAAME,KAAK,iBAAiB,GAEnEnB,EAAYkB,YAAYhB,GACgB,SAAxCD,EAAgBkB,KAAK,eACjBlB,EAAgBkB,KAAK,eAAe,GACpClB,EAAgBkB,KAAK,eAAe,KAjExCC,OAAOC,iBAAiB,SAAU,WAChCC,aAAajB,GACbA,EAAYkB,WAAY,aAErB,KAGLH,OAAOC,iBAAiB,QAAS,SAASG,GACtB,KAAdA,EAAEC,SAAkBC,KAAKC,SAASzB,IACpCH,EAAW6B,UAIfR,OAAOC,iBAAiB,oBAAqB,cA5B7CzB,EAAE,iBAAiBiC,YAAY,CAC7BC,SAAS,EACTC,QAAS,WACTC,mBAAmB,EACnBC,mBAAmB,EACnBC,gBAAiB","file":"sb.js","sourcesContent":["$(function ($) {\n\n  const $body = document.querySelector('body');\n  const $navToggle = $(\".hamburger\");\n  const $navigation = $(\".navigation\");\n  const $navigationMenu = $(\".navigation__menu\");\n  const is_open = \"is-active\";\n  const today = moment().format();\n  let resizeEnd;\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Initialise Ghost Hunter search\n  /////////////////////////////////////////////////////////////////////////////\n\n  function initSearch() {\n    $(\"#search-field\").ghostHunter({\n      onKeyUp: true,\n      results: \"#results\",\n      includebodysearch: true,\n      displaySearchInfo: false,\n      result_template: \"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p>{{title}}</p></a>\"\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Initialise various components and helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  function initGlobalEvents() {\n\n    window.addEventListener(\"resize\", function() {\n      clearTimeout(resizeEnd);\n      resizeEnd = setTimeout( function() {\n        resizeMenu();\n      }, 5);\n    });\n\n    window.addEventListener(\"keyup\", function(e) {\n      if (e.keyCode === 27 && $nav.hasClass(is_open)) {\n        $navToggle.click();\n      }\n    })\n\n    window.addEventListener(\"orientationchange\", function() {\n      resizeMenu();\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Form helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  $.fn.serializeObject = function() {\n    var o = {};\n    var a = this.serializeArray();\n    $.each(a, function() {\n      if (o[this.name]) {\n        if (!o[this.name].push) {\n          o[this.name] = [o[this.name]];\n        }\n        o[this.name].push(this.value || '');\n      } else {\n        o[this.name] = this.value || '';\n      }\n    });\n    return o;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Navigation helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  function resizeMenu() {\n\n  }\n\n  // Used to prevent page becoming \"fixed\" while partly out of viewport on\n  // trigger of mobile menu\n\n  function resetScrollPosition() {\n    $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\n  }\n\n  // Mobile navigation toggle\n\n  $navToggle.on('click', function () {\n    const $this = $(this);\n\n    $this.toggleClass(is_open)\n      .attr('aria-expanded') === 'true' ?\n      $this.attr('aria-expanded', false) : $this.attr('aria-expanded', true);\n\n    $navigation.toggleClass(is_open);\n    $navigationMenu.attr(\"aria-hidden\") === \"true\"\n      ? $navigationMenu.attr(\"aria-hidden\", false)\n      : $navigationMenu.attr(\"aria-hidden\", true);\n\n  });\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Run The Stuff...\n  /////////////////////////////////////////////////////////////////////////////\n\n  initGlobalEvents();\n  initSearch();\n\n});\n\n\n"]}