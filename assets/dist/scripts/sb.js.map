{"version":3,"sources":["sb.js"],"names":["$","$body","document","querySelector","$navToggle","$navigation","is_open","moment","format","resizeEnd","resizeMenu","removeClass","attr","$nav","$navSecondaryToggle","$navSecondary","classList","remove","css","fn","serializeObject","o","a","this","serializeArray","each","name","push","value","on","$this","toggleClass","window","addEventListener","clearTimeout","setTimeout","e","keyCode","hasClass","click","ghostHunter","onKeyUp","results","includebodysearch","displaySearchInfo","result_template"],"mappings":"AAAAA,EAAE,SAAUA,GAEV,MAAMC,EAAQC,SAASC,cAAc,QAC/BC,EAAaJ,EAAE,cACfK,EAAcL,EAAE,eAChBM,EAAU,YACFC,SAASC,SACvB,IAAIC,EAgEJ,SAASC,IAEPN,EAAWO,YAAYL,GAASM,KAAK,iBAAiB,GACtDC,KAAKF,YAAYL,GAGjBQ,oBAAoBH,YAAY,UAAUC,KAAK,iBAAiB,GAChEG,cAAcJ,YAAY,UAAUC,KAAK,eAAe,GAExDX,EAAMe,UAAUC,OAAO,gBACvBJ,KAAKK,IAAI,SAAU,WA9BrBlB,EAAEmB,GAAGC,gBAAkB,WACrB,IAAIC,EAAI,GACJC,EAAIC,KAAKC,iBAWb,OAVAxB,EAAEyB,KAAKH,EAAG,WACJD,EAAEE,KAAKG,OACJL,EAAEE,KAAKG,MAAMC,OAChBN,EAAEE,KAAKG,MAAQ,CAACL,EAAEE,KAAKG,QAEzBL,EAAEE,KAAKG,MAAMC,KAAKJ,KAAKK,OAAS,KAEhCP,EAAEE,KAAKG,MAAQH,KAAKK,OAAS,KAG1BP,GA6BTjB,EAAWyB,GAAG,QAAS,WACrB,MAAMC,EAAQ9B,EAAEuB,MAGa,SAD7BO,EAAMC,YAAYzB,GACfM,KAAK,iBACNkB,EAAMlB,KAAK,iBAAiB,GAASkB,EAAMlB,KAAK,iBAAiB,GAEV,SAAzDP,EAAY0B,YAAYzB,GAASM,KAAK,eAClCP,EAAYO,KAAK,eAAe,GAChCP,EAAYO,KAAK,eAAe,KAzEpCoB,OAAOC,iBAAiB,SAAU,WAChCC,aAAazB,GACbA,EAAY0B,WAAY,WACtBzB,KACC,KAGLsB,OAAOC,iBAAiB,QAAS,SAASG,GACtB,KAAdA,EAAEC,SAAkBxB,KAAKyB,SAAShC,IACpCF,EAAWmC,UAIfP,OAAOC,iBAAiB,oBAAqB,WAC3CvB,MA7BFV,EAAE,iBAAiBwC,YAAY,CAC7BC,SAAS,EACTC,QAAS,WACTC,mBAAmB,EACnBC,mBAAmB,EACnBC,gBAAiB","file":"sb.js","sourcesContent":["$(function ($) {\n\n  const $body = document.querySelector('body');\n  const $navToggle = $(\".hamburger\");\n  const $navigation = $(\".navigation\");\n  const is_open = \"is-active\";\n  const today = moment().format();\n  let resizeEnd;\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Initialise Ghost Hunter search\n  /////////////////////////////////////////////////////////////////////////////\n\n  function initSearch() {\n    $(\"#search-field\").ghostHunter({\n      onKeyUp: true,\n      results: \"#results\",\n      includebodysearch: true,\n      displaySearchInfo: false,\n      result_template: \"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p>{{title}}</p></a>\"\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Initialise various components and helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  function initGlobalEvents() {\n\n    window.addEventListener(\"resize\", function() {\n      clearTimeout(resizeEnd);\n      resizeEnd = setTimeout( function() {\n        resizeMenu();\n      }, 5);\n    });\n\n    window.addEventListener(\"keyup\", function(e) {\n      if (e.keyCode === 27 && $nav.hasClass(is_open)) {\n        $navToggle.click();\n      }\n    })\n\n    window.addEventListener(\"orientationchange\", function() {\n      resizeMenu();\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Form helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  $.fn.serializeObject = function() {\n    var o = {};\n    var a = this.serializeArray();\n    $.each(a, function() {\n      if (o[this.name]) {\n        if (!o[this.name].push) {\n          o[this.name] = [o[this.name]];\n        }\n        o[this.name].push(this.value || '');\n      } else {\n        o[this.name] = this.value || '';\n      }\n    });\n    return o;\n  };\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Navigation helpers\n  /////////////////////////////////////////////////////////////////////////////\n\n  function resizeMenu() {\n    // Hide primary nav\n    $navToggle.removeClass(is_open).attr('aria-expanded', false);\n    $nav.removeClass(is_open);\n\n    // Hide secondary menu on any resizing\n    $navSecondaryToggle.removeClass(\"active\").attr('aria-expanded', false);\n    $navSecondary.removeClass(\"active\").attr('aria-hidden', true);\n\n    $body.classList.remove('mz-no-scroll');\n    $nav.css('height', 'inherit');\n  }\n\n  // Used to prevent page becoming \"fixed\" while partly out of viewport on\n  // trigger of mobile menu\n\n  function resetScrollPosition() {\n    $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\n  }\n\n  // Mobile navigation toggle\n\n  $navToggle.on('click', function () {\n    const $this = $(this);\n\n    $this.toggleClass(is_open)\n      .attr('aria-expanded') === 'true' ?\n      $this.attr('aria-expanded', false) : $this.attr('aria-expanded', true);\n\n    $navigation.toggleClass(is_open).attr(\"aria-hidden\") === \"true\"\n      ? $navigation.attr(\"aria-hidden\", false)\n      : $navigation.attr(\"aria-hidden\", true);\n\n  });\n\n  /////////////////////////////////////////////////////////////////////////////\n  // Run The Stuff...\n  /////////////////////////////////////////////////////////////////////////////\n\n  initGlobalEvents();\n  initSearch();\n\n});\n\n\n"]}