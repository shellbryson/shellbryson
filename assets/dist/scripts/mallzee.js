$(function(e){const t=document.querySelector("body"),a=e("[data-navigation-toggle]"),n=e("[data-navigation-secondary-toggle]"),i=e("[data-navigation]"),o=e("[data-subnavigation]"),s=i.find("li").find("a"),l="js-isOpen",r=moment().format(),c=localStorage.getItem("mallzee__lastVisited"),d=localStorage.getItem("mallzee__dropCTAHasSignedUp"),m=localStorage.getItem("mallzee__dropCTALastShown");let g;localStorage.setItem("mallzee__lastVisited",r);const h=window.location.href;function f(a){const n=e(a),i=n.find("[data-contact-submit]");n.on("submit",function(a){const o=new Date,s=e("#when"),l=e("#ref");let r=o.getDate(),c=o.getMonth()+1,d=o.getFullYear();r<10&&(r="0"+r),c<10&&(c="0"+c),s.val(r+"/"+c+"/"+d),l.val(window.location.href),a.preventDefault();let m=n.serializeObject(),g=e.ajax({url:"https://script.google.com/macros/s/AKfycbzYtwIV_HmIBdfpd9cdzj7TrmYvHAGIVDoks7KAgDhy5QiNCaQ/exec",method:"POST",dataType:"json",data:m}),h=i.val();i.val("Sending form..."),n.find("input").attr("disabled","disabled").not("input[type=submit]").addClass("mz-fade"),g.done(function(){n.hasClass("mz-no-message")?i.val(h):(!function(e,a){let n=document.createElement("img");n.style.visibility="hidden",n.style.width="1px",n.style.height="1px",n.src=`https://dc.ads.linkedin.com/collect/?pid=${e}&conversionId=${a}&fmt=gif`,t.appendChild(n)}("169970","240505"),i.before("<h3>Thanks, we'll be in touch!</h3>"),i.hide())}),g.fail(function(){i.val(h),n.find("input").removeAttr("disabled"),i.before("<h3>Apologies, unable to submit this form right now. Please contact hq@mallzee.com</h3>")})})}function v(){a.removeClass(l).attr("aria-expanded",!1),i.removeClass(l),n.removeClass("active").attr("aria-expanded",!1),o.removeClass("active").attr("aria-hidden",!0),t.classList.remove("mz-no-scroll"),i.css("height","inherit")}function u(e){$intercom=document.getElementById("intercom-container"),$intercom&&($intercom.style.display=e?"none":"block")}function p(){e("html, body").animate({scrollTop:0},"slow")}e("#newsletterForm").submit(e=>{gtag("event","the drop signup",{event_category:"form",event_label:h})}),e("#js-resource").submit(e=>{gtag("event","request download",{event_category:"form",event_label:`resource - ${h}`})}),e("#newsletterFooter").submit(e=>{gtag("event","the drop signup",{event_category:"form",event_label:`footer - ${h}`})}),e("#newsletterModal").submit(e=>{gtag("event","the drop signup",{event_category:"form",event_label:`popup - ${h}`})}),e("#contactForm").submit(e=>{gtag("event","get in touch",{event_category:"form",event_label:h})}),e(".js-social").click(t=>{const a=e(this).data("network");gtag("event","go to social",{event_category:"social button",event_label:a})}),e(".js-download").click(t=>{const a=e(this).attr("href");gtag("event","download",{event_category:"resource",event_label:a})}),e.fn.serializeObject=function(){var t={},a=this.serializeArray();return e.each(a,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},a.on("click",function(){const a=e(this);if("true"===a.toggleClass(l).attr("aria-expanded")?a.attr("aria-expanded",!1):a.attr("aria-expanded",!0),"true"===i.toggleClass(l).attr("aria-hidden")?i.attr("aria-hidden",!1):i.attr("aria-hidden",!0),"-1"===s.attr("tabindex")?s.attr("tabindex",""):s.attr("tabindex","-1"),window.innerHeight&&window.innerWidth){const e=window.innerHeight,a=window.innerWidth,n=i.offset().top;if(a<1024)if(i.hasClass(l)){const a=e-n;i.css("height",a+"px"),p(),t.classList.add("mz-no-scroll")}else t.classList.remove("mz-no-scroll"),i.css("height","inherit");else t.classList.remove("mz-no-scroll"),i.css("height","inherit")}i.hasClass(l)?u(!0):u(!1)}),n.on("click",function(t){e(this);t.preventDefault(),"true"===e(this).toggleClass("active").attr("aria-expanded")?e(this).attr("aria-expanded",!1):e(this).attr("aria-expanded",!0),"true"===o.toggleClass("active").attr("aria-hidden")?o.attr("aria-hidden",!1):o.attr("aria-hidden",!0),p()}),window.addEventListener("resize",function(){clearTimeout(g),g=setTimeout(function(){v()},5)}),window.addEventListener("keyup",function(e){27===e.keyCode&&i.hasClass(l)&&a.click()}),window.addEventListener("orientationchange",function(){v()}),function(){const t=new GhostContentAPI({url:"https://content.mallzee.com",key:"24c8d026081fd061cca7648918",version:"v2"}),a=e(".js-teamGrid");a.length&&t.posts.browse({filter:"tag:hash-staff",limit:"all"}).then(e=>{let t;_.sortBy(e,["title"]).forEach(e=>{let n=`<div class="team-grid__employee">\n              <div class="team-grid__image">${t=e.feature_image?`<img src=${e.feature_image} alt="${e.title}" />`:""}</div>\n              <div class="team-grid__name">${e.title}</div>\n              <div class="team-grid__role">${e.excerpt}</div>\n            </div>\n          `;a.append(n)})}).catch(e=>{console.log(e)})}(),f("[data-contact-form]"),f("[data-trial-form]"),function(){const t=e("#js-resourceForm");t.on("submit",function(a){a.preventDefault();const n=new Date,i=e("#date"),o=e("#page"),s=e("#file").val(),l=e("#destination").val();let r=n.getDate(),c=n.getMonth()+1,d=n.getFullYear();r<10&&(r="0"+r),c<10&&(c="0"+c),i.val(r+"/"+c+"/"+d),o.val(window.location.href),a.preventDefault();let m=t.serializeObject(),g=e.ajax({url:"https://script.google.com/macros/s/AKfycbzMleiJwtydMVfVQceUZHy5pviZmV5zMHoYcFgOXfV5grS5iwE/exec",method:"POST",dataType:"json",data:m});g.done(function(){gtag("event","download",{event_category:"resource",event_label:s}),window.location.replace(l)}),g.fail(function(){console.log("ERROR")})})}(),function(){if(!d){if(!m){const t=90;let a=0;setInterval(()=>{if(++a===t){const t=window.location.href,a=moment().format();localStorage.setItem("mallzee__dropCTALastShown",a),e(".js-subscribe").removeClass("hidden"),gtag("event","view",{event_category:"popup",event_label:t})}},1e3)}if(c&&m){const e=moment(m),t=moment(c);moment.duration(t.diff(e)).asDays()>29&&localStorage.removeItem("mallzee__dropCTALastShown")}}e(".js-modal-close").on("click",()=>{e(".js-subscribe").addClass("hidden"),gtag("event","close",{event_category:"popup",event_label:h})}),e(".js-sign-up").on("click",()=>{localStorage.setItem("mallzee__dropCTAHasSignedUp","true"),e(".js-subscribe").addClass("hidden")})}(),e("#search-field").ghostHunter({onKeyUp:!0,results:"#results",includebodysearch:!0,displaySearchInfo:!1,result_template:"<a id='gh-{{ref}}' class='gh-search-item' href='{{link}}'><p>{{title}}</p></a>"}),function(){const t=e("#js-roi"),a=e(t).find("#js-action"),n=e(t).find("#_turnover"),i=e(t).find("#_lines"),o=(e(t).find("#_gross"),e(t).find("#_net")),s=e(t).find("#_c_revenue"),l=e(t).find("#_c_profit"),r=e(t).find("#_cm_revenue"),c=e(t).find("#_cm_net"),d=e(t).find("#_cm_increase_net"),m=e(t).find("#_cm_roi");a.on("click",function(e){e.preventDefault;const t=1e6*n.val(),a=i.val(),g=t/a,h=t/(a*o.val());s.val(g.toFixed(2)),l.val(h.toFixed(2));const f=1.061*o.val();c.val(f.toFixed(2));const v=t/a*f/100;r.val(v.toFixed(2));const u=100*(f/o.val()-1);d.val(u.toFixed(2)),m.val(100)})}()});
//# sourceMappingURL=mallzee.js.map